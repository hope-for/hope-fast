SET FOREIGN_KEY_CHECKS=0;

#magic_api接口生成文件保存表
CREATE TABLE `magic_api_file` (
  `file_path` varchar(512) NOT NULL,
  `file_content` mediumtext,
  PRIMARY KEY (`file_path`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='magic_api接口生成文件保存表';

#用户信息表
CREATE TABLE `sys_user` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(30) DEFAULT NULL COMMENT '用户账号',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='用户信息表';

#初始数据
INSERT INTO `magic_api_file` VALUES ('/magic-api/api/', 'this is directory');
INSERT INTO `magic_api_file` VALUES ('/magic-api/api/用户模块/', 'this is directory');
INSERT INTO `magic_api_file` VALUES ('/magic-api/api/用户模块/group.json', '{\r\n  \"properties\" : { },\r\n  \"id\" : \"f39af6ff09334f61a1477106c778ff9d\",\r\n  \"name\" : \"用户模块\",\r\n  \"type\" : \"1\",\r\n  \"parentId\" : \"0\",\r\n  \"path\" : \"/sysUser\",\r\n  \"paths\" : [ ],\r\n  \"options\" : [ ]\r\n}');
INSERT INTO `magic_api_file` VALUES ('/magic-api/api/用户模块/未定义名称.ms', '{\r\n  \"properties\" : { },\r\n  \"id\" : \"cc006157df904a118283d00ac3cda5ec\",\r\n  \"script\" : null,\r\n  \"groupId\" : \"f39af6ff09334f61a1477106c778ff9d\",\r\n  \"name\" : \"未定义名称\",\r\n  \"createTime\" : null,\r\n  \"updateTime\" : 1632300035054,\r\n  \"lock\" : \"0\",\r\n  \"method\" : \"GET\",\r\n  \"path\" : \"/getUserInfo\",\r\n  \"parameters\" : [ {\r\n    \"name\" : \"page\",\r\n    \"value\" : \"1\",\r\n    \"description\" : \"\",\r\n    \"required\" : false,\r\n    \"dataType\" : \"String\",\r\n    \"type\" : null,\r\n    \"defaultValue\" : \"1\",\r\n    \"validateType\" : null,\r\n    \"error\" : null,\r\n    \"expression\" : null,\r\n    \"children\" : null\r\n  }, {\r\n    \"name\" : \"size\",\r\n    \"value\" : \"10\",\r\n    \"description\" : \"\",\r\n    \"required\" : false,\r\n    \"dataType\" : \"String\",\r\n    \"type\" : null,\r\n    \"defaultValue\" : \"10\",\r\n    \"validateType\" : null,\r\n    \"error\" : null,\r\n    \"expression\" : null,\r\n    \"children\" : null\r\n  } ],\r\n  \"option\" : \"[]\",\r\n  \"requestBody\" : \"\",\r\n  \"headers\" : [ ],\r\n  \"paths\" : [ ],\r\n  \"responseBody\" : \"{\\n    \\\"code\\\": 1,\\n    \\\"message\\\": \\\"success\\\",\\n    \\\"data\\\": {\\n        \\\"total\\\": 1,\\n        \\\"list\\\": [\\n            {\\n                \\\"id\\\": 1,\\n                \\\"username\\\": \\\"test\\\"\\n            }\\n        ]\\n    },\\n    \\\"timestamp\\\": 1632300030432,\\n    \\\"executeTime\\\": 229\\n}\",\r\n  \"description\" : null,\r\n  \"requestBodyDefinition\" : null,\r\n  \"responseBodyDefinition\" : {\r\n    \"name\" : \"\",\r\n    \"value\" : \"\",\r\n    \"description\" : \"\",\r\n    \"required\" : false,\r\n    \"dataType\" : \"Object\",\r\n    \"type\" : null,\r\n    \"defaultValue\" : null,\r\n    \"validateType\" : \"\",\r\n    \"error\" : \"\",\r\n    \"expression\" : \"\",\r\n    \"children\" : [ {\r\n      \"name\" : \"code\",\r\n      \"value\" : \"1\",\r\n      \"description\" : \"\",\r\n      \"required\" : false,\r\n      \"dataType\" : \"Integer\",\r\n      \"type\" : null,\r\n      \"defaultValue\" : null,\r\n      \"validateType\" : \"\",\r\n      \"error\" : \"\",\r\n      \"expression\" : \"\",\r\n      \"children\" : [ ]\r\n    }, {\r\n      \"name\" : \"message\",\r\n      \"value\" : \"success\",\r\n      \"description\" : \"\",\r\n      \"required\" : false,\r\n      \"dataType\" : \"String\",\r\n      \"type\" : null,\r\n      \"defaultValue\" : null,\r\n      \"validateType\" : \"\",\r\n      \"error\" : \"\",\r\n      \"expression\" : \"\",\r\n      \"children\" : [ ]\r\n    }, {\r\n      \"name\" : \"data\",\r\n      \"value\" : \"\",\r\n      \"description\" : \"\",\r\n      \"required\" : false,\r\n      \"dataType\" : \"Object\",\r\n      \"type\" : null,\r\n      \"defaultValue\" : null,\r\n      \"validateType\" : \"\",\r\n      \"error\" : \"\",\r\n      \"expression\" : \"\",\r\n      \"children\" : [ {\r\n        \"name\" : \"total\",\r\n        \"value\" : \"1\",\r\n        \"description\" : \"\",\r\n        \"required\" : false,\r\n        \"dataType\" : \"Integer\",\r\n        \"type\" : null,\r\n        \"defaultValue\" : null,\r\n        \"validateType\" : \"\",\r\n        \"error\" : \"\",\r\n        \"expression\" : \"\",\r\n        \"children\" : [ ]\r\n      }, {\r\n        \"name\" : \"list\",\r\n        \"value\" : \"\",\r\n        \"description\" : \"\",\r\n        \"required\" : false,\r\n        \"dataType\" : \"Array\",\r\n        \"type\" : null,\r\n        \"defaultValue\" : null,\r\n        \"validateType\" : \"\",\r\n        \"error\" : \"\",\r\n        \"expression\" : \"\",\r\n        \"children\" : [ {\r\n          \"name\" : \"\",\r\n          \"value\" : \"\",\r\n          \"description\" : \"\",\r\n          \"required\" : false,\r\n          \"dataType\" : \"Object\",\r\n          \"type\" : null,\r\n          \"defaultValue\" : null,\r\n          \"validateType\" : \"\",\r\n          \"error\" : \"\",\r\n          \"expression\" : \"\",\r\n          \"children\" : [ {\r\n            \"name\" : \"id\",\r\n            \"value\" : \"1\",\r\n            \"description\" : \"\",\r\n            \"required\" : false,\r\n            \"dataType\" : \"Integer\",\r\n            \"type\" : null,\r\n            \"defaultValue\" : null,\r\n            \"validateType\" : \"\",\r\n            \"error\" : \"\",\r\n            \"expression\" : \"\",\r\n            \"children\" : [ ]\r\n          }, {\r\n            \"name\" : \"username\",\r\n            \"value\" : \"test\",\r\n            \"description\" : \"\",\r\n            \"required\" : false,\r\n            \"dataType\" : \"String\",\r\n            \"type\" : null,\r\n            \"defaultValue\" : null,\r\n            \"validateType\" : \"\",\r\n            \"error\" : \"\",\r\n            \"expression\" : \"\",\r\n            \"children\" : [ ]\r\n          } ]\r\n        } ]\r\n      } ]\r\n    }, {\r\n      \"name\" : \"timestamp\",\r\n      \"value\" : \"1632300030432\",\r\n      \"description\" : \"\",\r\n      \"required\" : false,\r\n      \"dataType\" : \"Long\",\r\n      \"type\" : null,\r\n      \"defaultValue\" : null,\r\n      \"validateType\" : \"\",\r\n      \"error\" : \"\",\r\n      \"expression\" : \"\",\r\n      \"children\" : [ ]\r\n    }, {\r\n      \"name\" : \"executeTime\",\r\n      \"value\" : \"229\",\r\n      \"description\" : \"\",\r\n      \"required\" : false,\r\n      \"dataType\" : \"Integer\",\r\n      \"type\" : null,\r\n      \"defaultValue\" : null,\r\n      \"validateType\" : \"\",\r\n      \"error\" : \"\",\r\n      \"expression\" : \"\",\r\n      \"children\" : [ ]\r\n    } ]\r\n  },\r\n  \"optionMap\" : { }\r\n}\r\n================================\r\nvar sql=\"\"\"\r\nselect * from sys_user\r\n\"\"\"\r\nreturn db.page(sql);');
INSERT INTO `magic_api_file` VALUES ('/magic-api/datasource/', 'this is directory');
INSERT INTO `magic_api_file` VALUES ('/magic-api/function/', 'this is directory');

INSERT INTO `sys_user` VALUES ('1', 'test');